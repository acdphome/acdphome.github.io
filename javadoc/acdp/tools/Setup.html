<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (11) on Tue Oct 27 09:29:55 CET 2020 -->
<title>Setup</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf8">
<meta name="dc.created" content="2020-10-27">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Setup";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9,"i1":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Setup.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">acdp.tools</a></div>
<h2 title="Class Setup" class="title">Class Setup</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>acdp.tools.Setup</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public final class <span class="typeNameLabel">Setup</span>
extends java.lang.Object</pre>
<div class="block">Assists with setting up a database once the concrete custom database class,
 the concrete custom table classes and the optional custom column types have
 been coded.
 All generated files, among them the database's layout file, are saved into a
 single directory.
 As a side effect, the Setup Tool checks the coded classes for correctness
 and writes a meaningful message to the standard output
 stream in the case of an error.
 <p>
 The Setup Tool needs as input the name of the <em>database class</em>, that
 is, a concrete subclass of the <a href="../design/CustomDatabase.html" title="class in acdp.design"><code>CustomDatabase</code></a> class.
 In order for the Setup Tool to be able to process the database class, the
 database class and the table classes must be annotated as described in
 the descriptions of the <code>CustomDatabase</code> and the <a href="../design/CustomTable.html" title="class in acdp.design"><code>CustomTable</code></a>
 classes.
 Needless to say that such annotations are only required for setting up the
 database.
 They can be removed once the database is setup.
 <p>
 Although the generated database layout, containing the nested layouts of the
 tables and columns, is complete and can be immediately used to open the
 database, you may want to manually customize it to suit your personal needs,
 for example for adding some comments (comment lines in a <a href="../misc/Layout.html" title="class in acdp.misc">layout</a> begin with the number sign ('#') character), for
 renaming or relocating the generated backing files of the database or for
 reducing the values of the table-specific settings <code>nobsRowRef</code>,
 <code>nobsOutrowPtr</code> and <code>nobsRefCount</code> to get a more compact storage
 format.
 (For an explanation of these fields read chapter "Explanation of the <code>
 nobsRowRef</code>, <code>nobsOutrowPtr</code> and <code>nobsRefCount</code> Settings" at
 the bottom.)
 Of course, all this can also be done later when some data has made its way
 into the database, but then no longer manually because there is a risk of
 data integrity violation.
 Use the methods defined in the <a href="Settings.html" title="class in acdp.tools"><code>Settings</code></a> class to view all database
 settings stored in the layout file and to modify some of them or <a href="Refactor.html" title="class in acdp.tools">refactor</a> the database to safely change the structure of the
 database.
 <p>
 If a table has a custom column type (contrary to a built-in column type)
 then its <a href="../design/SimpleType.TypeFromDesc.html" title="annotation in acdp.design">annotated</a> type factory method
 is assumed to be a member of the class defining that custom column type.
 If this is not the case then please change the value of the <code>
 typeFactoryClassName</code> field of the corresponding column sublayout
 accordingly.
 On this occasion, you may want to add the <code>typeFactoryClasspath</code> field
 in that  column sublayout with a value equal to the directory housing the
 class file of the class that defines the type factory class method and any
 depending class files.
 Of course, this is only necessary if those class files are not yet on
 the classpath which may be the case if the database is opened as a
 <a href="../Database.html" title="interface in acdp">weakly typed database</a>.
 (You can also put your class files inside a JAR file and save it into the
 directory specified by the <code>typeFactoryClasspath</code> layout field or into
 any subdirectory of this directory.)
 <p>
 When running the Setup Tool it is not necessary to specify whether the data
 in the database should be encrypted or not.
 As long as the database is empty, or as soon as it is empty again, the type
 of encryption can be defined (or redefined) when opening the empty database.
 <p>
 The Setup Tool can be run from the <a href="#main(java.lang.String%5B%5D)"><code>main(java.lang.String[])</code></a> method or by invoking the
 <a href="#run(java.lang.String,java.nio.file.Path)"><code>run(java.lang.String, java.nio.file.Path)</code></a> method.
 
 <h1>Explanation of the <code>nobsRowRef</code>, <code>nobsOutrowPtr</code> and <code>
 nobsRefCount</code> Settings</h1>
 Each table is roughly sized by the values of the following three parameters
 which appear in the <code>store</code> section of the table layout: The <code>
 nobsRowRef</code>, <code>nobsOutrowPtr</code> and <code>nobsRefCount</code> parameters.
 (The abbreviation <code>nobs</code> stands for "number of bytes".)
 
 <h2><code>nobsRowRef</code></h2>
 The value of the <code>nobsRowRef</code> parameter limits the number of rows in
 the table to 256<sup><code>nobsRowRef</code></sup> - 1, e.g., 65535 if <code>
 nobsRowRef</code> is equal to 2.
 The value of <code>nobsRowRef</code> cannot be greater than 8 and if it is 8 then
 the size of the table is limited to the absolute maximum of <code>Long.MAX_VALUE</code> &asymp; 9&sdot;10<sup>18</sup> rows.
 (In practice, this is not a limitation if we keep in mind that a file cannot
 be larger than <code>Long.MAX_VALUE</code> bytes.)
 The size of the byte representation of a <a href="../Ref.html" title="interface in acdp">reference</a> is
 identical to the value of this parameter.
 
 <h2><code>nobsOutrowPtr</code></h2>
 Table data from columns with an <a href="../types/Type.Scheme.html#OUTROW">outrow</a> storage
 scheme or being of an <a href="../types/Type.Scheme.html#INROW">inrow</a>  array type having an
 outrow element type is stored in a separate file, the so called "VL data
 file".
 Outrow data is referenced by a <em>file position</em> that locates the start
 of the outrow data within the VL data file.
 The file position is an unsigned integer of length equal to the value of the
 <code>nobsOutrowPtr</code> parameter thus limiting the size of the VL data file
 by the size of all blocks with a file position less than
 256<sup><code>nobsOutrowPtr</code></sup> - 1.
 As with the <code>nobsRowRef</code> parameter, the value of <code>nobsOutrowPtr</code>
 cannot be greater than 8 and if it is 8 then the size of the file storing
 the outrow data of the table is limited to the absolute maximum of <code>
 Long.MAX_VALUE</code> bytes which is around eight million terabytes.
 This parameter is missing if the table doesn't store any outrow data.
 
 <h2><code>nobsRefCount</code></h2>
 The value of the <code>nobsRefCount</code> parameter limits the number of rows
 that can reference a particular row within the table to
 256<sup><code>nobsRefCount</code></sup>-1, e.g., 255 if <code>nobsRefCount</code> is
 equal to 1.
 As with the other two fields, the value of <code>nobsRefCount</code> cannot be
 greater than 8 and if it is 8 then the number of rows referencing a
 particular row within the table is limited to the absolute maximum of <code>
 Long.MAX_VALUE</code> &asymp; 9&sdot;10<sup>18</sup> rows.
 This parameter is missing if none of the tables of the database (including
 this table) has a column referencing this table.
 <p>
 The Setup Tool sets these three parameters to their maximum value of 8.
 As long as the table is empty you can reduce these values by just manually
 editing the database layout file.
 If the table is not empty then these values can still be changed but they
 must be changed by refactoring the database, hence, by invoking one of the
 following three methods: <a href="Refactor.html#nobsRowRef(java.nio.file.Path,java.lang.String,int)"><code>Refactor.nobsRowRef(java.nio.file.Path, java.lang.String, int)</code></a>, <a href="Refactor.html#nobsOutrowPtr(java.nio.file.Path,java.lang.String,int)"><code>Refactor.nobsOutrowPtr(java.nio.file.Path, java.lang.String, int)</code></a>, and <a href="Refactor.html#nobsRefCount(java.nio.file.Path,java.lang.String,int)"><code>Refactor.nobsRefCount(java.nio.file.Path, java.lang.String, int)</code></a>.
 Note that if these values are reduced too much, the risk increases that the
 corresponding maximum values described above are exceeded.
 ACDP throws a <a href="../exceptions/MaximumException.html" title="class in acdp.exceptions"><code>MaximumException</code></a> if the maximum
 values determined by these parameters are to be exceeded.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Beat Hörmann</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="Setup.SetupColumn.html" title="annotation in acdp.tools">Setup.SetupColumn</a></span></code></th>
<td class="colLast">
<div class="block">The <code>@SetupColumn</code> annotation is used by the Setup Tool to
 identify the column <em>objects</em> declared within a table class.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="Setup.SetupDatabase.html" title="annotation in acdp.tools">Setup.SetupDatabase</a></span></code></th>
<td class="colLast">
<div class="block">The <code>@SetupDatabase</code> annotation is used by the Setup Tool to get
 the name of the database and the names of the database's tables.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="Setup.SetupTable.html" title="annotation in acdp.tools">Setup.SetupTable</a></span></code></th>
<td class="colLast">
<div class="block">The <code>@SetupTable</code> annotation is used by the Setup Tool to get the
 names of the table's columns.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="Setup.SetupTableDeclaration.html" title="annotation in acdp.tools">Setup.SetupTableDeclaration</a></span></code></th>
<td class="colLast">
<div class="block">The <code>@SetupTableDeclaration</code> annotation is used by the Setup Tool
 to identify a table declaration within the database class.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#main(java.lang.String%5B%5D)">main</a></span>&#8203;(java.lang.String[]&nbsp;args)</code></th>
<td class="colLast">
<div class="block">The <code>main</code> method invoking the <a href="#run(java.lang.String,java.nio.file.Path)"><code>run(java.lang.String, java.nio.file.Path)</code></a> method.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run(java.lang.String,java.nio.file.Path)">run</a></span>&#8203;(java.lang.String&nbsp;dbcn,
   java.nio.file.Path&nbsp;dir)</code></th>
<td class="colLast">
<div class="block">Generates the database files from a database class, hence, from a class
 annotated with the <a href="Setup.SetupDatabase.html" title="annotation in acdp.tools"><code>@SetupDatabase</code></a> annotation and
 saves them to a given directory.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="run(java.lang.String,java.nio.file.Path)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre class="methodSignature">public static final&nbsp;void&nbsp;run&#8203;(java.lang.String&nbsp;dbcn,
                             java.nio.file.Path&nbsp;dir)
                      throws <a href="../exceptions/IOFailureException.html" title="class in acdp.exceptions">IOFailureException</a></pre>
<div class="block">Generates the database files from a database class, hence, from a class
 annotated with the <a href="Setup.SetupDatabase.html" title="annotation in acdp.tools"><code>@SetupDatabase</code></a> annotation and
 saves them to a given directory.
 <p>
 This method may throw an exception that is different from the listed
 exception.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbcn</code> - The name of the database class, for instance
         "<code>com.example.MyDB</code>".
         The database class is the class annotated with <a href="Setup.SetupDatabase.html" title="annotation in acdp.tools"><code>@SetupDatabase</code></a>.</dd>
<dd><code>dir</code> - The directory where the generated database files are to be
         saved.
         If this value is <code>null</code> then this method takes as directory
         the value returned by a call to <code>Paths.get(dbName)</code> where
         <code>dbName</code> denotes the name of the database.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exceptions/IOFailureException.html" title="class in acdp.exceptions">IOFailureException</a></code> - If saving the genereated database files fails.</dd>
</dl>
</li>
</ul>
<a id="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre class="methodSignature">public static final&nbsp;void&nbsp;main&#8203;(java.lang.String[]&nbsp;args)
                       throws java.lang.IllegalArgumentException,
                              <a href="../exceptions/IOFailureException.html" title="class in acdp.exceptions">IOFailureException</a></pre>
<div class="block">The <code>main</code> method invoking the <a href="#run(java.lang.String,java.nio.file.Path)"><code>run(java.lang.String, java.nio.file.Path)</code></a> method.
 <p>
 The first element of the <code>args</code> array must contain the name of the
 database class, for instance "<code>com.example.MyDB</code>".
 If the <code>args</code> array contains a second element then this element is
 assumed to denote the directory where to save the generated database
 files.
 If the <code>args</code> array does not contain a second element then the
 generated database files are saved to the directory obtained by a call
 to <code>Paths.get(dbName)</code> where <code>dbName</code> denotes the name of
 the database.
 <p>
 This method may throw an exception that is different from the listed
 exceptions.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - The command-line arguments.
         See the method description for details.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - If <code>args</code> is empty or contains
         more than two elements.</dd>
<dd><code><a href="../exceptions/IOFailureException.html" title="class in acdp.exceptions">IOFailureException</a></code> - If saving the genereated database files fails.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Setup.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
